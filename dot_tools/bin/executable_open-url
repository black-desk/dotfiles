#!/usr/bin/env zsh

if [[ $SCRIPT_DEBUG ]] ; then
  set -x
fi

_path=`pwd`
symlink=`echo $_path | perl -pe 's/.*?((?:(?!\/).)*?\@(?:(?!\/).)*).*/\1/g'`

if [[ $symlink == $_path ]] ; then
  symlink=${_path#*/projects/}
  array=("${(@s|/|)symlink}")
else
  array=("${(@s/@/)symlink}")
fi

if [[ ${array[1]} == "github" ]] ; then
  url=https://github.com/${array[2]}/${array[3]}/${array[4]}/${array[5]}
else if [[ ${array[1]} == "uniontech" ]] ; then
  url=https://pms.uniontech.com/zentao/${array[2]}-view-${array[3]}.html
else
  echo "unknown"
  exit
fi
fi

(xdg-open $url &>/dev/null &)
